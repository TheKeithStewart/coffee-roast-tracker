<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enhanced ADHD-Optimized Roasting Interface with Themes - Coffee Roast Tracker</title>
    <link rel="stylesheet" href="../design-system/design-system-core.css">
    <link rel="stylesheet" href="../design-system/brand-system.css">
    <link rel="stylesheet" href="../design-system/component-library.css">
    <style>
        /* Page-specific styles */
        .roasting-interface {
            min-height: 100vh;
            padding: var(--space-4);
            background: linear-gradient(135deg, var(--color-background), var(--color-background-secondary));
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .theme-switcher {
            position: fixed;
            top: var(--space-4);
            right: var(--space-4);
            z-index: var(--z-sticky);
            display: flex;
            gap: var(--space-2);
            background: var(--color-surface);
            padding: var(--space-2);
            border-radius: var(--radius-xl);
            border: 2px solid var(--color-border);
            box-shadow: var(--shadow-lg);
        }

        .theme-btn {
            width: 32px;
            height: 32px;
            border: 2px solid var(--color-border);
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: all var(--duration-200) var(--ease-in-out);
            position: relative;
        }

        .theme-btn:hover {
            transform: scale(1.1);
            box-shadow: var(--shadow-md);
        }

        .theme-btn--active {
            border-width: 3px;
            box-shadow: 0 0 0 2px var(--color-primary-200);
        }

        .theme-btn--classic { background: linear-gradient(45deg, #c8794a, #f2c179); }
        .theme-btn--contrast { background: linear-gradient(45deg, #000000, #ffffff); }
        .theme-btn--focus { background: linear-gradient(45deg, #0ea5e9, #22c55e); }
        .theme-btn--energizing { background: linear-gradient(45deg, #f97316, #14b8a6); }

        .roasting-container {
            max-width: 800px;
            width: 100%;
            display: flex;
            flex-direction: column;
            gap: var(--space-8);
            align-items: center;
        }

        .roasting-header {
            text-align: center;
            margin-bottom: var(--space-6);
        }

        .roasting-title {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-4);
            margin-bottom: var(--space-2);
        }

        .roasting-controls {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--space-6);
            width: 100%;
            margin-top: var(--space-8);
        }

        .control-group {
            display: flex;
            flex-direction: column;
            gap: var(--space-4);
            align-items: center;
        }

        .control-group__title {
            font-size: var(--font-size-lg);
            font-weight: var(--font-weight-semibold);
            color: var(--color-text-secondary);
            text-transform: uppercase;
            letter-spacing: var(--letter-spacing-wide);
        }

        .emergency-zone {
            position: fixed;
            bottom: var(--space-6);
            left: 50%;
            transform: translateX(-50%);
            z-index: var(--z-docked);
        }

        .status-bar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: var(--color-surface);
            border-bottom: 2px solid var(--color-border);
            padding: var(--space-3) var(--space-4);
            z-index: var(--z-sticky);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .status-item {
            display: flex;
            align-items: center;
            gap: var(--space-2);
            font-size: var(--font-size-sm);
            font-weight: var(--font-weight-medium);
            color: var(--color-text-secondary);
        }

        .skip-to-content {
            position: absolute;
            top: -40px;
            left: 6px;
            background: var(--color-surface);
            color: var(--color-text-primary);
            padding: var(--space-2) var(--space-4);
            text-decoration: none;
            border-radius: var(--radius-md);
            font-weight: var(--font-weight-medium);
            z-index: var(--z-skipLink);
            border: 2px solid var(--color-border-strong);
        }

        .skip-to-content:focus {
            top: 6px;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .roasting-container {
                padding: var(--space-4);
            }
            
            .roasting-controls {
                grid-template-columns: 1fr;
                gap: var(--space-4);
            }
            
            .theme-switcher {
                position: fixed;
                bottom: var(--space-4);
                right: var(--space-4);
                top: auto;
                flex-direction: column;
            }
            
            .emergency-zone {
                bottom: 120px;
            }
        }
    </style>
</head>
<body data-theme="classic">
    <!-- Skip to Content Link -->
    <a href="#main-content" class="skip-to-content">Skip to main content</a>

    <!-- Status Bar -->
    <div class="status-bar">
        <div class="status-item">
            <div class="brand-logo brand-logo--horizontal">
                <div class="brand-logo__icon brand-logo__icon--sm">
                    <svg class="icon icon--md" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"></path>
                        <line x1="3" y1="6" x2="21" y2="6"></line>
                        <path d="M16 10a4 4 0 0 1-8 0"></path>
                    </svg>
                </div>
                <span class="brand-logo__text brand-logo__text--sm">Roast Tracker</span>
            </div>
        </div>
        <div class="auto-save auto-save--saved">
            <svg class="auto-save__icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
            </svg>
            Auto-saved
        </div>
    </div>

    <!-- Theme Switcher -->
    <div class="theme-switcher" role="region" aria-label="Theme selector">
        <button class="theme-btn theme-btn--classic theme-btn--active" data-theme="classic" aria-label="Classic Coffee Theme" title="Classic Coffee Theme"></button>
        <button class="theme-btn theme-btn--contrast" data-theme="contrast" aria-label="High Contrast Theme" title="High Contrast Theme"></button>
        <button class="theme-btn theme-btn--focus" data-theme="focus" aria-label="Cool Focus Theme" title="Cool Focus Theme"></button>
        <button class="theme-btn theme-btn--energizing" data-theme="energizing" aria-label="Energizing Theme" title="Energizing Theme"></button>
    </div>

    <!-- Main Content -->
    <main id="main-content" class="roasting-interface">
        <div class="roasting-container">
            <!-- Header -->
            <header class="roasting-header">
                <div class="roasting-title">
                    <h1 class="typography-h2">Active Roast Session</h1>
                    <div class="timer-display__phase phase-development">
                        <svg class="icon icon--sm" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path d="M18 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3H6l-3-3 3-3z"></path>
                        </svg>
                        Development Phase
                    </div>
                </div>
                <p class="typography-body text-adhd-friendly">
                    Ethiopian Yirgacheffe - Light to Medium Roast Target
                </p>
            </header>

            <!-- Timer Display -->
            <div class="timer-display timer-display--active">
                <div class="timer-display__time" id="timer-display">12:45</div>
                <div class="timer-display__label">Total Roast Time</div>
            </div>

            <!-- Progress Bar -->
            <div class="progress-bar--labeled" style="width: 100%; max-width: 400px;">
                <div class="progress-bar__label">
                    <span>Roast Progress</span>
                    <span>68%</span>
                </div>
                <div class="progress-bar progress-bar--large">
                    <div class="progress-bar__track" style="width: 68%"></div>
                </div>
            </div>

            <!-- Controls -->
            <div class="roasting-controls">
                <!-- Temperature Controls -->
                <div class="control-group">
                    <div class="control-group__title">Temperature</div>
                    <div class="temp-display temp-display--medium">
                        <span class="temp-display__value">425</span>
                        <span class="temp-display__unit">Â°F</span>
                    </div>
                    <div style="display: flex; gap: var(--space-3);">
                        <button class="btn btn--secondary">
                            <svg class="icon icon--sm" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <line x1="5" y1="12" x2="19" y2="12"></line>
                            </svg>
                            Reduce Heat
                        </button>
                        <button class="btn btn--secondary">
                            <svg class="icon icon--sm" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <line x1="12" y1="5" x2="12" y2="19"></line>
                                <line x1="5" y1="12" x2="19" y2="12"></line>
                            </svg>
                            Add Heat
                        </button>
                    </div>
                </div>

                <!-- Phase Controls -->
                <div class="control-group">
                    <div class="control-group__title">Phase Control</div>
                    <button class="btn btn--primary btn--large">
                        <svg class="icon icon--lg" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <polygon points="5,3 19,12 5,21 5,3"></polygon>
                        </svg>
                        Next Phase
                    </button>
                    <button class="btn btn--ghost">
                        <svg class="icon icon--sm" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path d="M3 3h6l6 18h6"></path>
                            <path d="M14 3h7"></path>
                        </svg>
                        Quick Notes
                    </button>
                </div>
            </div>

            <!-- Additional Info Cards -->
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: var(--space-4); width: 100%; margin-top: var(--space-6);">
                <div class="card">
                    <div class="card__header">
                        <h3 class="card__title">Bean Information</h3>
                    </div>
                    <div class="card__body">
                        <div class="bean-card__origin">Ethiopia</div>
                        <p class="typography-body-small">
                            <strong>Farm:</strong> Yirgacheffe Cooperative<br>
                            <strong>Process:</strong> Washed<br>
                            <strong>Altitude:</strong> 1,800-2,000m
                        </p>
                    </div>
                </div>

                <div class="card">
                    <div class="card__header">
                        <h3 class="card__title">Roast Profile</h3>
                    </div>
                    <div class="card__body">
                        <div class="typography-body-small">
                            <strong>Target:</strong> City+ (Light-Medium)<br>
                            <strong>First Crack:</strong> 9:30 @ 385Â°F<br>
                            <strong>End Temp:</strong> 435-445Â°F
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Emergency Zone -->
    <div class="emergency-zone">
        <button class="btn btn--emergency btn--xl" id="emergency-stop" aria-describedby="emergency-help">
            <svg class="icon icon--xl" viewBox="0 0 24 24" fill="currentColor">
                <rect x="6" y="6" width="12" height="12"></rect>
            </svg>
            EMERGENCY STOP
        </button>
        <div id="emergency-help" class="typography-caption" style="text-align: center; margin-top: var(--space-2);">
            Immediately ends roast session
        </div>
    </div>

    <!-- Accessibility Announcements -->
    <div aria-live="polite" aria-atomic="true" class="sr-only" id="announcements"></div>

    <script>
        // Theme switching functionality
        const themeButtons = document.querySelectorAll('.theme-btn');
        const body = document.body;

        themeButtons.forEach(button => {
            button.addEventListener('click', () => {
                const theme = button.dataset.theme;
                
                // Update active button
                themeButtons.forEach(btn => btn.classList.remove('theme-btn--active'));
                button.classList.add('theme-btn--active');
                
                // Apply theme
                body.dataset.theme = theme;
                
                // Announce theme change
                const announcements = document.getElementById('announcements');
                announcements.textContent = `Theme changed to ${theme}`;
                
                // Store preference
                localStorage.setItem('coffee-tracker-theme', theme);
            });
        });

        // Load saved theme
        const savedTheme = localStorage.getItem('coffee-tracker-theme') || 'classic';
        body.dataset.theme = savedTheme;
        themeButtons.forEach(btn => {
            btn.classList.remove('theme-btn--active');
            if (btn.dataset.theme === savedTheme) {
                btn.classList.add('theme-btn--active');
            }
        });

        // Timer functionality
        let startTime = Date.now() - (12 * 60 + 45) * 1000; // Simulate 12:45 elapsed
        
        function updateTimer() {
            const elapsed = Date.now() - startTime;
            const minutes = Math.floor(elapsed / 60000);
            const seconds = Math.floor((elapsed % 60000) / 1000);
            
            const display = `${minutes}:${seconds.toString().padStart(2, '0')}`;
            document.getElementById('timer-display').textContent = display;
            
            // Announce time at minute intervals for screen readers
            if (seconds === 0) {
                const announcements = document.getElementById('announcements');
                announcements.textContent = `${minutes} minutes elapsed`;
            }
        }

        // Update timer every second
        setInterval(updateTimer, 1000);
        updateTimer();

        // Emergency stop functionality
        document.getElementById('emergency-stop').addEventListener('click', () => {
            if (confirm('Are you sure you want to emergency stop the roast? This cannot be undone.')) {
                document.getElementById('announcements').textContent = 'Emergency stop activated. Roast session ended.';
                alert('Emergency stop activated! Roast session has been safely terminated.');
            }
        });

        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            // Emergency stop: Ctrl/Cmd + Shift + S
            if ((e.ctrlKey || e.metaKey) && e.shiftKey && e.key.toLowerCase() === 's') {
                e.preventDefault();
                document.getElementById('emergency-stop').click();
            }
            
            // Next phase: Ctrl/Cmd + Enter
            if ((e.ctrlKey || e.metaKey) && e.key === 'Enter') {
                e.preventDefault();
                document.querySelector('.btn--primary').click();
            }
        });

        // Auto-save simulation
        setInterval(() => {
            const autoSave = document.querySelector('.auto-save');
            autoSave.classList.remove('auto-save--saved');
            setTimeout(() => {
                autoSave.classList.add('auto-save--saved');
            }, 2000);
        }, 30000); // Every 30 seconds

        // Focus management for ADHD users
        document.addEventListener('DOMContentLoaded', () => {
            // Set initial focus to most important element
            document.querySelector('.btn--primary').focus();
        });

        // Announce phase changes
        const phaseButtons = document.querySelectorAll('.control-group .btn');
        phaseButtons.forEach(button => {
            button.addEventListener('click', (e) => {
                if (button.textContent.includes('Next Phase')) {
                    e.preventDefault();
                    const currentPhase = document.querySelector('.timer-display__phase');
                    currentPhase.textContent = 'Second Crack Phase';
                    currentPhase.className = 'timer-display__phase phase-second-crack';
                    
                    document.getElementById('announcements').textContent = 'Moved to Second Crack phase';
                }
            });
        });

        // Enhanced accessibility for screen readers
        document.getElementById('timer-display').setAttribute('aria-live', 'polite');
        document.getElementById('timer-display').setAttribute('aria-atomic', 'true');
        
        // Add ARIA labels for better screen reader support
        document.querySelectorAll('.temp-display').forEach(display => {
            display.setAttribute('role', 'status');
            display.setAttribute('aria-label', 'Current temperature reading');
        });
    </script>
</body>
</html>